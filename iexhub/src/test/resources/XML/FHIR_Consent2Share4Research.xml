<?xml version="1.0" encoding="UTF-8"?>
<!-- 
Sample Consent STU 3 Resource

This consent was created by the patient (identified in the contained Patient resource) and signed by the patient using C2S.
The patient "permits" the "Source Organization" to disclose substance abuse (code: ETH) and mental health (code:PSY) 
to a provider identifier by their NPI (National Provider Identifier).

Queestion: Patient lookup or ad-hoc creation?

-->
<Consent xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://hl7.org/fhir ../../../../fhir/stu3/consent.xsd"
    xmlns="http://hl7.org/fhir">
    <contained>
        <Patient xmlns="http://hl7.org/fhir">
            <id value="patientId"/>
            <identifier>
                <system value="urn:oid:2.16.840.1.113883.4.1"/>
                <value value="123-45-6789"/>
            </identifier>
            <identifier>
                <!-- source system patient id -->
                <system value="urn:oid:2.16.840.1.113883.3.72.5.9.1"/>
                <value value="patientId"/>
            </identifier>
            <name>
                <family value="Patient Family Name"/>
                <given value="Patient Given Name"/>
            </name>
            <telecom>
                <system value="phone"/>
                <value value="555-1212"/>
                <use value="home"/>
            </telecom>
            <telecom>
                <system value="email"/>
                <value value="patient@home.org"/>
                <use value="home"/>
            </telecom>
            <gender value="female"/>
            <birthDate value="1966-10-22"/>
            <address>
                <type value="postal"/>
                <line value="Patient Address Line"/>
                <city value="City"/>
                <state value="NY"/>
                <postalCode value="12345"/>
            </address>
            <managingOrganization>
                <reference value="#sourceOrgOID"/>
            </managingOrganization>
        </Patient>
    </contained>
    <contained>
        <Organization xmlns="http://hl7.org/fhir">
            <id value="sourceOrgOID"/>
            <identifier>
                <system value="urn:oid:2.16.840.1.113883.4.6"/>
                <value value="NPI of source organization"/>
            </identifier>
            <name value="Source Organization Name"/>
            <address>
                <line value="1 Source Drive"/>
                <city value="Source City"/>
                <state value="NY"/>
                <postalCode value="01221"/>
            </address>
            <contact>
                <name>
                    <family value="Contact Family Name"/>
                    <given value="Contact Given Name"/>
                </name>
                <telecom>
                    <system value="phone"/>
                    <value value="408-555-1212"/>
                    <use value="work"/>
                </telecom>
                <telecom>
                    <system value="email"/>
                    <value value="contact@sourceorgnization.org"/>
                    <use value="work"/>
                </telecom>
            </contact>
        </Organization>
    </contained>
    <contained>
        <Practitioner xmlns="http://hl7.org/fhir">
            <id value="recipientPractitionerNPI"/>
            <identifier>
                <system value="urn:oid:2.16.840.1.113883.4.6"/>
                <value value="NPI of recipient provider"/>
            </identifier>
            <name>
                <family value="Recipient Practitioner Last Name"/>
                <given value="Recipient Practitioner Given Name"/>
                <prefix value="Ms."/>
                <suffix value="MD"/>
            </name>
            <telecom>
                <system value="phone"/>
                <value value="212-000-1212"/>
                <use value="work"/>
            </telecom>
            <telecom>
                <system value="email"/>
                <value value="recipient@destination.org"/>
                <use value="work"/>
            </telecom>
            <address>
                <line value="Recipient Practitioner Address Line"/>
                <city value="City"/>
                <state value="NY"/>
                <postalCode value="98765"/>
            </address>
        </Practitioner>
    </contained>
    <identifier>
        <!-- 0..1 Identifier Identifier for this record (external references) -->
        <system value="urn:oid:2.16.840.1.113883.3.72.5.9.1"/>
        <value value="consent GUID generated by C2S"/>
    </identifier>
    <status value="active"
        ><!-- 1..1 draft | proposed | active | rejected | inactive | entered-in-error --></status>
    <category>
        <!-- 0..* CodeableConcept Classification of the consent statement - for indexing/retrieval -->
        <coding>
            <system value="urn:oid:2.16.840.1.113883.5.4"/>
            <code value="IDSCL"/>
            <display value="Disclose"/>
        </coding>
        <text value="Consent to disclose information"/>
    </category>
    <!-- 0..1 When this Consent was created by C2S user -->
    <dateTime value="2016-07-08T14:28:04-04:00"/>
    <period>
        <!-- 0..1 Period Period that this consent applies -->
        <start value="2015-06-10"/>
        <end value="2016-06-10"/>
    </period>
    <patient>
        <!-- 1..1 Reference(Patient) whose information/resources are affected by the consent-->
        <reference value="#patientId"/>
    </patient>
    <consentor>
        <!-- 0..* Reference(Organization|Patient|Practitioner|RelatedPerson) who signed/authenticated the consnt on behalf of the patient.
                  For C2S this is the patient or patient proxy-->
        <reference value="#patientId"/>
    </consentor>
    <organization>
        <!-- 0..1 Reference(Organization) Organization that manages the consent using C2S -->
        <reference value="#sourceOrgOID"/>
    </organization>
    <!-- Reference the "default" OAuth2 policy that covers the related information -->
    <policy value="http://policy.sourceorgnization.org/OAuth2/OrganizationPolicy"/>
    <recipient>
        <!-- 0..* Reference(Device|Group|Organization|Patient|Practitioner|
    RelatedPerson|CareTeam) Whose access is controlled by the policy -->
        <reference value="#recipientPractitionerNPI"/>
    </recipient>
    <purpose>
        <!-- 0..* Coding Context of activities for which the agreement is made -->
        <system value="http://hl7.org/fhir/v3/ActReason"/>
        <code value="HRESCH"/>
    </purpose>
    <except>
        <!-- 0..* Additional rule -  addition or removal of permissions. -->
        <!-- 1..1 deny | permit -->
        <type value="permit"/>
        <securityLabel>
            <system value="http://hl7.org/fhir/v3/ActCode"/>
            <code value="ETH"/>
            <display value="Substance Abuse Related Data"/>
        </securityLabel>
        <securityLabel>
            <system value="http://hl7.org/fhir/v3/ActCode"/>
            <code value="PSY"/>
            <display value="Mental Health related"/>
        </securityLabel>
    </except>
</Consent>
